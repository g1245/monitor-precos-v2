networks:
  monitor-precos-network:
    driver: bridge
services:
  webapp:
    build: 
      context: .docker/app
      dockerfile: Dockerfile
    volumes:
      - ./:/var/www/html
    ports:
      - ${APP_PORT:-8080}:80
    networks:
      - monitor-precos-network
  mailpit:
    image: axllent/mailpit:latest
    ports:
      - ${FORWARD_MAILPIT_PORT:-1025}:1025
      - ${FORWARD_MAILPIT_DASHBOARD_PORT:-8025}:8025
    networks:
      - monitor-precos-network
  mariadb:
    image: mariadb:10.11.2
    ports:
      - ${FORWARD_DB_PORT:-3306}:3306
    environment:
      MYSQL_ROOT_PASSWORD: ${DB_PASSWORD}
      MYSQL_DATABASE: ${DB_DATABASE}
      MYSQL_USER: ${DB_USERNAME}
      MYSQL_PASSWORD: ${DB_PASSWORD}
    volumes:
      - mariadb:/var/lib/mysql
    networks:
      - monitor-precos-network
  redis:
    image: redis:alpine
    ports:
        - ${FORWARD_REDIS_PORT:-6379}:6379
    networks:
      - monitor-precos-network
volumes:
  mariadb: